# Общее Саммари по всем тестам

## Описание

Функция "Общее саммари" объединяет результаты всех пройденных пользователем тестов в единый отчёт с визуализацией и практическими рекомендациями.

## 6 ключевых шкал личности

1. **Эмоциональный баланс** - Устойчивость к стрессу, эмоциональная стабильность
2. **Самоконтроль и дисциплина** - Воля, ответственность, умение следовать планам
3. **Социальность и эмпатия** - Общительность, доброжелательность, контактность
4. **Осознанность и рефлексия** - Самоанализ, внимательность к себе
5. **Мотивация и энергия** - Драйв, стремление к целям, внутренняя сила
6. **Креативность и гибкость мышления** - Любопытство, открытость новому

## Архитектура

### Конфигурация (summary_config.dart)
- Определение 6 шкал с цветами и иконками
- Соответствие тестов шкалам с весами и направлениями
- Настройки нормализации и пороги уверенности

### Модели (summary_model.dart)
- SummaryScore - баллы по шкалам с уверенностью
- SummaryData - полные данные саммари
- SummaryCalculator - логика расчётов

### Провайдер (summary_provider.dart)
- Управление состоянием саммари
- Сохранение/загрузка из SharedPreferences
- Расчёт и обновление данных

### Визуализация (summary_charts.dart)
- RadarChart - радар-диаграмма (паутина)
- MiniScale - горизонтальные мини-шкалы
- SummaryVisualization - комбинированный виджет

### Экран (summary_screen.dart)
- Полноценный экран с визуализацией
- Текстовое саммари и советы
- Детальная информация о вкладах тестов

## Логика расчёта

1. **Сбор данных**: Получение результатов всех тестов пользователя
2. **Нормализация**: Приведение баллов к шкале 0-100
3. **Взвешивание**: Применение весов и направлений из конфигурации
4. **Агрегация**: Расчёт средних по каждой шкале
5. **Уверенность**: Определение уровня уверенности по количеству тестов
6. **Генерация текста**: Создание описательного саммари и советов

## Соответствие тестов шкалам

### Big Five (IPIP)
- Эмоциональный баланс ← Эмоциональная стабильность (инвертировано)
- Самоконтроль ← Добросовестность
- Социальность ← Доброжелательность (0.7) + Экстраверсия (0.3)
- Осознанность ← Интеллект (0.6)
- Креативность ← Интеллект (0.4)
- Мотивация ← Добросовестность (0.6) + Экстраверсия (0.4)

### Fisher Temperament
- Эмоциональный баланс ← Осторожность (0.6) + Просоциальность (0.4)
- Самоконтроль ← Осторожность
- Социальность ← Просоциальность (0.7) + Любопытство (0.3)
- Осознанность ← Просоциальность
- Мотивация ← Аналитичность (0.6) + Любопытство (0.4)
- Креативность ← Любопытство (0.7) + Просоциальность (0.3)

### Тест на стресс
- Эмоциональный баланс ← Общий балл (инвертировано)
- Самоконтроль ← Общий балл (0.3, инвертировано)

### Тест на самооценку
- Эмоциональный баланс ← Общий балл (0.7)
- Осознанность ← Общий балл (0.8)
- Мотивация ← Общий балл (0.5)

## Уровни уверенности

- **Высокая** (≥3 разных тестов): "Данные очень репрезентативны"
- **Средняя** (≥2 тестов): "Данные достаточно репрезентативны"
- **Низкая** (<2 тестов): "Данные предварительные"

## Использование

```dart
// Получить провайдер
final summaryProvider = Provider.of<SummaryProvider>(context);

// Рассчитать саммари
await summaryProvider.refreshSummary(testProvider, languageCode);

// Проверить доступность
if (summaryProvider.hasSummary) {
  final summary = summaryProvider.currentSummary!;
  final axisScores = summaryProvider.getAllAxisScores();
}
```

## Доступность

Функция доступна в разделе "Результаты" при наличии ≥2 пройденных тестов. Отображается как:
- Кнопка "Саммари" в заголовке
- Карточка "Общее саммари" в начале списка результатов

## Тестирование

Запустить приложение и:
1. Пройти минимум 2 разных теста
2. Перейти в раздел "Результаты"
3. Нажать кнопку "Саммари" или карточку
4. Проверить визуализацию и текстовые описания

## Будущие улучшения

- [ ] Интеграция с бэкендом для сохранения саммари
- [ ] Экспорт саммари в PDF
- [ ] Сравнение с предыдущими периодами
- [ ] Персонализированные советы на основе динамики
