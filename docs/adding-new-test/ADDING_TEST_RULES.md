# ‚ö†Ô∏è ADDING TEST - 8 –ö–†–ò–¢–ò–ß–ï–°–ö–ò–• –ü–†–ê–í–ò–õ

> **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ö –ü–†–û–ß–¢–ï–ù–ò–Æ!**
> –≠—Ç–∏ –ø—Ä–∞–≤–∏–ª–∞ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç—è—Ç 80% –≤–æ–∑–º–æ–∂–Ω—ã—Ö –æ—à–∏–±–æ–∫ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ —Ç–µ—Å—Ç–∞.

---

## üî¥ –ü–†–ê–í–ò–õ–û #1: Scores –î–û–õ–ñ–ù–´ –±—ã—Ç—å 0-4 (–ù–ï 1-5!)

### –ü—Ä–æ–±–ª–µ–º–∞
–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å scores –æ—Ç 1 –¥–æ 5, –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–ª –±—É–¥–µ—Ç 20% –≤–º–µ—Å—Ç–æ 0%.

### ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:
```dart
AnswerModel(text: {'ru': '–ù–∏–∫–æ–≥–¥–∞'}, score: 1),  // –º–∏–Ω–∏–º—É–º = 20%
AnswerModel(text: {'ru': '–í—Å–µ–≥–¥–∞'}, score: 5),   // –º–∞–∫—Å–∏–º—É–º = 100%
```

### ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:
```dart
AnswerModel(text: {'ru': '–ù–∏–∫–æ–≥–¥–∞'}, score: 0),  // –º–∏–Ω–∏–º—É–º = 0%
AnswerModel(text: {'ru': '–í—Å–µ–≥–¥–∞'}, score: 4),   // –º–∞–∫—Å–∏–º—É–º = 100%
```

### –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞
- Scores 1-5: `54 √ó 1 = 54` ‚Üí `54/270 = 20%` ‚ùå
- Scores 0-4: `54 √ó 0 = 0` ‚Üí `0/216 = 0%` ‚úÖ

---

## üî¥ –ü–†–ê–í–ò–õ–û #2: –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –≤–µ—Å–∞ - –∫–æ–≥–¥–∞ –∏ –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –¢–∞–±–ª–∏—Ü–∞ –ø—Ä–∞–≤–∏–ª

| –¢–∏–ø —à–∫–∞–ª—ã | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ | –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –≤–µ—Å–∞ | –ß—Ç–æ –¥–µ–ª–∞—Ç—å |
|-----------|-----------|-------------------|------------|
| **195 –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö —à–∫–∞–ª** | 195 | ‚úÖ **–î–ê** | –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è –æ–±—Ä–∞—Ç–Ω—ã—Ö –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–π |
| **8 –±–∏–ø–æ–ª—è—Ä–Ω—ã—Ö –ø–æ–ª—é—Å–æ–≤** | 8 | ‚ùå **–ù–ï–¢** | –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã–π –ø–æ–ª—é—Å |

### 8 –±–∏–ø–æ–ª—è—Ä–Ω—ã—Ö –ø–æ–ª—é—Å–æ–≤ Personality Type (–ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ!)

- `extraversion` ‚Üî `introversion`
- `sensing` ‚Üî `intuition`
- `thinking` ‚Üî `feeling`
- `judging` ‚Üî `perceiving`

### –ü—Ä–∞–≤–∏–ª–æ –∏–Ω–≤–µ—Ä—Å–∏–∏
- ‚ùå `'extraversion': -0.3` ‚Üí ‚úÖ `'introversion': 0.3`
- ‚ùå `'thinking': -0.5` ‚Üí ‚úÖ `'feeling': 0.5`

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ (195 –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö —à–∫–∞–ª)

```dart
// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –æ–±—Ä–∞—Ç–Ω–∞—è –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è
'vitality': -1.0,           // –£—Å—Ç–∞–ª–æ—Å—Ç—å —Å–Ω–∏–∂–∞–µ—Ç —ç–Ω–µ—Ä–≥–∏—é
'stress_tolerance': -0.8,   // –°—Ç—Ä–µ—Å—Å —Å–Ω–∏–∂–∞–µ—Ç —Ç–æ–ª–µ—Ä–∞–Ω—Ç–Ω–æ—Å—Ç—å
'anxiety': 0.9,             // –°—Ç—Ä–µ—Å—Å –ø–æ–≤—ã—à–∞–µ—Ç —Ç—Ä–µ–≤–æ–≥—É (–ø—Ä—è–º–∞—è)
```

### ‚ö†Ô∏è –ü—Ä–∞–≤–∏–ª–æ "(reversed)"
–í—Å–µ —à–∫–∞–ª—ã —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ "(reversed)" –î–û–õ–ñ–ù–´ –∏–º–µ—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –≤–µ—Å–∞!

---

## üî¥ –ü–†–ê–í–ò–õ–û #3: –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ direction –ø–æ –∑–Ω–∞–∫—É –≤–µ—Å–∞

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ
Direction –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò –ø–æ –∑–Ω–∞–∫—É –≤–µ—Å–∞!

### ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:
```dart
'stress_test:q5': QuestionWeight(
  axisWeights: {
    'vitality': -1.0,         // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ direction = -1
    'anxiety': 0.9,           // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ direction = 1
  },
),
```

### ‚ùå –ù–ï –ù–£–ñ–ù–û:
```dart
axisDirections: {  // ‚Üê –ù–ï –ù–£–ñ–ù–û! –û–ø—Ä–µ–¥–µ–ª–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
  'vitality': -1,
},
```

---

## üî¥ –ü–†–ê–í–ò–õ–û #4: summary_service.dart –î–û–õ–ñ–ï–ù –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–µ—Å–∞

### –ü—Ä–æ–±–ª–µ–º–∞
–ë–µ–∑ –∏–º–ø–æ—Ä—Ç–∞ Personality Type —à–∫–∞–ª—ã –Ω–µ –ø–æ–∫–∞–∂—É—Ç –≤–ª–∏—è–Ω–∏–µ —Ç–µ—Å—Ç–∞.

### –†–µ—à–µ–Ω–∏–µ
–í `lib/services/summary_service.dart`:

```dart
// 1. –ò–º–ø–æ—Ä—Ç –≤ –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞
import '../config/summary/question_weights/your_test_weights.dart';

// 2. –í –º–µ—Ç–æ–¥–µ getQuestionsWithPersonalityTypeWeights()
final allWeights = <String, QuestionWeight>{
  ...IPIPBigFiveWeights.weights,
  ...YourTestWeights.weights,  // ‚Üê –î–û–ë–ê–í–ò–¢–¨
};
```

---

## üî¥ –ü–†–ê–í–ò–õ–û #5: –ó–∞—â–∏—Ç–∞ –æ—Ç NaN –≤ —Ä–∞—Å—á–µ—Ç–∞—Ö

### –ì–¥–µ –¥–æ–±–∞–≤–ª—è—Ç—å
–í Data —Ñ–∞–π–ª–µ (`getFactorInterpretation`):

```dart
static Map<String, String> getFactorInterpretation(String factorId, double percentage) {
  // –ó–∞—â–∏—Ç–∞ –æ—Ç NaN
  if (percentage.isNaN || percentage.isInfinite) {
    percentage = 0.0;
  }
  percentage = percentage.clamp(0.0, 100.0);
  // ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞
}
```

### –°–∏–º–ø—Ç–æ–º
–û—à–∏–±–∫–∞ "Converting object to an encodable object failed: NaN"

---

## üî¥ –ü–†–ê–í–ò–õ–û #6: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¢–û–õ–¨–ö–û —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ 195 —à–∫–∞–ª

### –ü—Ä–æ–±–ª–µ–º–∞ –ø—Ä–∏–¥—É–º–∞–Ω–Ω—ã—Ö —à–∫–∞–ª
- ‚ùå –®–∫–∞–ª–∞ –ù–ï –ø–æ—è–≤–∏—Ç—Å—è –≤ Summary
- ‚ùå –í–µ—Å –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è
- ‚ùå –õ–æ–∂–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞

### ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:
```dart
'social_battery_v1:q1': QuestionWeight(
  axisWeights: {
    'social_energy_depletion': 1.0,  // ‚ùå –ù–ï —Å—É—â–µ—Å—Ç–≤—É–µ—Ç!
    'interaction_fatigue': 0.9,       // ‚ùå –ù–ï —Å—É—â–µ—Å—Ç–≤—É–µ—Ç!
  },
)
```

### ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:
```dart
'social_battery_v1:q1': QuestionWeight(
  axisWeights: {
    'vitality': -0.9,                 // ‚úÖ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
    'stress_tolerance': -0.7,         // ‚úÖ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
    'introversion': 0.8,              // ‚úÖ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
  },
)
```

### –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å
1. –û—Ç–∫—Ä–æ–π—Ç–µ `lib/config/summary/hierarchical_scales.dart`
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Ctrl+F –¥–ª—è –ø–æ–∏—Å–∫–∞ —à–∫–∞–ª—ã
3. –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ - –≤—ã–±–µ—Ä–∏—Ç–µ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏ –±–ª–∏–∑–∫—É—é

### –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (195 —à–∫–∞–ª)
- **–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è** (~40): anxiety, stress_tolerance, emotional_resilience...
- **–°–æ—Ü–∏–∞–ª—å–Ω–∞—è** (~35): extraversion, sociability, empathy...
- **–ö–æ–≥–Ω–∏—Ç–∏–≤–Ω–∞—è** (~30): creativity, problem_solving, attention_control...
- **–ú–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω–∞—è** (~25): achievement_striving, persistence...
- **–õ–∏—á–Ω–æ—Å—Ç–Ω—ã–µ** (~30): conscientiousness, openness, impulsiveness...
- **–û—Ç–Ω–æ—à–µ–Ω–∏—è** (~25): trust, intimacy, commitment...
- **–°–∞–º–æ–æ—Ü–µ–Ω–∫–∞** (~20): self_esteem, self_compassion...

---

## üî¥ –ü–†–ê–í–ò–õ–û #7: –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ —à–∫–∞–ª—ã —Ç–µ—Å—Ç–∞ vs Summary —à–∫–∞–ª—ã

### ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û: FactorModel - –£–°–¢–ê–†–ï–í–®–ò–ô API!

### ‚ùå –ù–ï –ò–°–ü–û–õ–¨–ó–£–ô–¢–ï:
```dart
static List<FactorModel> get _factors => [...];  // ‚ùå FactorModel –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç!
```

### ‚úÖ –ò–°–ü–û–õ–¨–ó–£–ô–¢–ï:
```dart
// –î–ª—è —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤ —Ç–µ—Å—Ç–∞
static Map<String, Map<String, String>> getFactorNames() {
  return {
    'emotional_exhaustion': {
      'ru': '–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –∏—Å—Ç–æ—â–µ–Ω–∏–µ',
      'en': 'Emotional Exhaustion',
    },
  };
}

static Map<String, String> getFactorInterpretation(String factorId, double percentage) {
  // NaN protection (–ü–†–ê–í–ò–õ–û #5)
  if (percentage.isNaN) percentage = 0.0;
  // ... –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏
}
```

### –î–≤–∞ —Ç–∏–ø–∞ —à–∫–∞–ª

1. **–£–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Ñ–∞–∫—Ç–æ—Ä—ã —Ç–µ—Å—Ç–∞**
   - –¢–æ–ª—å–∫–æ –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ç–µ—Å—Ç–∞
   - –ß–µ—Ä–µ–∑ getFactorNames() –∏ getFactorInterpretation()
   - –ù–ï –¥–æ–±–∞–≤–ª—è—Ç—å –≤ hierarchical_scales.dart

2. **Summary —à–∫–∞–ª—ã (weights)**
   - 195 –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö + 8 –±–∏–ø–æ–ª—è—Ä–Ω—ã—Ö
   - –î–û–õ–ñ–ù–´ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –≤ hierarchical_scales.dart
   - –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ weights —Ñ–∞–π–ª–µ

### –ü—Ä–∏–º–µ—Ä –º–∞–ø–ø–∏–Ω–≥–∞
```dart
// –§–∞–∫—Ç–æ—Ä —Ç–µ—Å—Ç–∞ "emotional_exhaustion" –º–∞–ø–ø–∏—Ç—Å—è –Ω–∞:
'vitality': -1.0,               // –°—É—â–µ—Å—Ç–≤—É—é—â–∞—è —à–∫–∞–ª–∞
'emotional_resilience': -0.9,   // –°—É—â–µ—Å—Ç–≤—É—é—â–∞—è —à–∫–∞–ª–∞
'burnout': 0.9,                 // –°—É—â–µ—Å—Ç–≤—É—é—â–∞—è —à–∫–∞–ª–∞
// –ù–ï 'emotional_exhaustion': 1.0 - —ç—Ç–æ —Ñ–∞–∫—Ç–æ—Ä —Ç–µ—Å—Ç–∞!
```

---

## üî¥ –ü–†–ê–í–ò–õ–û #8: maxQuestionScore –ö–†–ò–¢–ò–ß–ï–ù –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤

### –ü—Ä–æ–±–ª–µ–º–∞
–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π maxQuestionScore ‚Üí –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ù–ï 100%.

### –¢–∞–±–ª–∏—Ü–∞

| –®–∫–∞–ª–∞ –æ—Ç–≤–µ—Ç–æ–≤ | –í–∞—Ä–∏–∞–Ω—Ç—ã | Scores | maxQuestionScore | –ü—Ä–∏–º–µ—Ä—ã |
|--------------|----------|--------|------------------|---------|
| Likert 4-point | 4 | 0-3 | **3** | Fisher |
| Likert 5-point | 5 | 0-4 | **4** | DISC, Burnout |
| Likert 6-point | 6 | 0-5 | **5** | Big Five (default) |

### –ö–∞–∫ –∏—Å–ø—Ä–∞–≤–∏—Ç—å

–í `lib/services/test_service.dart` (~—Å—Ç—Ä–æ–∫–∞ 92):

```dart
final int maxQuestionScore = test.id == 'fisher_temperament'
    ? 3
    : test.id == 'your_test_id'  // ‚Üê –î–æ–±–∞–≤–∏—Ç—å
        ? 4  // ‚Üê –ï—Å–ª–∏ scores 0-4
        : 5; // Default
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞
- –ü—Ä–æ–π–¥–∏—Ç–µ —Ç–µ—Å—Ç —Å –ú–ê–ö–°–ò–ú–ê–õ–¨–ù–´–ú–ò –æ—Ç–≤–µ—Ç–∞–º–∏
- –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å 100%
- –ï—Å–ª–∏ 80% ‚Üí –∏—Å–ø—Ä–∞–≤—å—Ç–µ maxQuestionScore

---

## üìã –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —á–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º

```markdown
‚ñ° –í—Å–µ scores: 0-4 (–ù–ï 1-5)
‚ñ° Personality Type –≤–µ—Å–∞ —Ç–æ–ª—å–∫–æ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ
‚ñ° –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ "(reversed)" –∏–º–µ—é—Ç –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –≤–µ—Å–∞
‚ñ° –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¢–û–õ–¨–ö–û —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ 195 —à–∫–∞–ª
‚ñ° –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è FactorModel
‚ñ° summary_service.dart –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –≤–µ—Å–∞
‚ñ° getFactorInterpretation() –∏–º–µ–µ—Ç NaN protection
‚ñ° maxQuestionScore –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π (–µ—Å–ª–∏ –Ω–µ 0-5)
‚ñ° flutter analyze –±–µ–∑ –æ—à–∏–±–æ–∫
‚ñ° –¢–µ—Å—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 0-100% (–Ω–µ 20-100%)
```

---

## üö® –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

```bash
bash tools/validate_test.sh your_test_id
```

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç:
- –í–∞–ª–∏–¥–Ω–æ—Å—Ç—å —à–∫–∞–ª
- –î—É–±–ª–∏–∫–∞—Ç—ã –∫–ª—é—á–µ–π
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –≤–æ –≤—Å–µ—Ö —Ç–æ—á–∫–∞—Ö
- –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –≤–µ—Å–∞ –Ω–∞ –±–∏–ø–æ–ª—è—Ä–Ω—ã—Ö –ø–æ–ª—é—Å–∞—Ö

---

> **üí° –ì–ª–∞–≤–Ω–æ–µ:** –°–ª–µ–¥—É–π—Ç–µ —ç—Ç–∏–º 8 –ø—Ä–∞–≤–∏–ª–∞–º –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —á–µ–∫–ª–∏—Å—Ç - —ç—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –æ—à–∏–±–æ–∫!